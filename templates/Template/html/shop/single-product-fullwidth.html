{% load static %}
{% load template_tags %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Title -->
        <title>Single Product Fullwidth | Tokyo Store - Responsive Website Template</title>

        <!-- Required Meta Tags Always Come First -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Favicon -->
        <link rel="shortcut icon" href="{% static "favicon.png" %}">

        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&display=swap" rel="stylesheet">

        <!-- CSS Implementing Plugins -->
        <link rel="stylesheet" href="{% static "assets/vendor/font-awesome/css/fontawesome-all.min.css" %}">
        <link rel="stylesheet" href="{% static "assets/css/font-electro.css" %}">

        <link rel="stylesheet" href="{% static "assets/vendor/animate.css/animate.min.css" %}">
        <link rel="stylesheet" href="{% static "assets/vendor/hs-megamenu/src/hs.megamenu.css" %}">
        <link rel="stylesheet" href="{% static "assets/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css" %}">
        <link rel="stylesheet" href="{% static "assets/vendor/fancybox/jquery.fancybox.css" %}">
        <link rel="stylesheet" href="{% static "assets/vendor/slick-carousel/slick/slick.css" %}">
        <link rel="stylesheet" href="{% static "assets/vendor/bootstrap-select/dist/css/bootstrap-select.min.css" %}">

        <!-- CSS Electro Template -->
        <link rel="stylesheet" href="{% static "assets/css/theme.css" %}">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    </head>

    <body>

        <!-- ========== HEADER ========== -->
        {% include "Template\html\home\header.html" %}
        <!-- ========== END HEADER ========== -->

        <!-- ========== MAIN CONTENT ========== -->
        <main id="content" role="main">
            <!-- breadcrumb -->
            <div class="bg-gray-13 bg-md-transparent">
                <div class="container">
                    <!-- breadcrumb -->
                    <div class="my-md-3">
                        <nav aria-label="breadcrumb">
                            {% include "Template\html\shop\bread.html" %}
                        </nav>
                    </div>
                    <!-- End breadcrumb -->
                </div>
            </div>
            <!-- End breadcrumb -->
            <div class="container">
                <!-- Single Product Body -->
                <div class="mb-xl-14 mb-6">
                    <div class="row">
                        <div class="col-md-5 mb-4 mb-md-0">
                            <div id="sliderSyncingNav" class="js-slick-carousel u-slick mb-2"
                                data-infinite="true"
                                data-arrows-classes="d-none d-lg-inline-block u-slick__arrow-classic u-slick__arrow-centered--y rounded-circle"
                                data-arrow-left-classes="fas fa-arrow-left u-slick__arrow-classic-inner u-slick__arrow-classic-inner--left ml-lg-2 ml-xl-4"
                                data-arrow-right-classes="fas fa-arrow-right u-slick__arrow-classic-inner u-slick__arrow-classic-inner--right mr-lg-2 mr-xl-4"
                                data-nav-for="#sliderSyncingThumb">
                                
                                {% for g in product_images %}
                                    <div class="js-slide">
                                        <img class="img-fluid" data-image="{{g.image.url}}" data-index={{ forloop.counter }} src="{{g.image.url}}" alt="Image Description">
                                    </div>
                                {% endfor %}
                            </div>

                            <div id="sliderSyncingThumb" class="js-slick-carousel u-slick u-slick--slider-syncing u-slick--slider-syncing-size u-slick--gutters-1 u-slick--transform-off"
                                data-infinite="true"
                                data-slides-show="5"
                                data-is-thumbs="true"
                                data-nav-for="#sliderSyncingNav">

                                {% for g in product_images %}
                                    <div class="js-slide" style="cursor: pointer;">
                                        <img data-image="{{g.image.url}}" data-index={{ forloop.counter }} class="img-fluid" src="{{g.image.url}}" alt="{{g.alt}}">
                                    </div>
                                {% endfor %}

                            </div>
                        </div>
                        <div class="col-md-7 mb-md-6 mb-lg-0">
                            <div class="mb-2">
                                <div class="border-bottom mb-3 pb-md-1 pb-3">
                                    <a href="{% url "store:category-shop" meta_title=product.category.meta_title %}" class="font-size-12 text-gray-5 mb-2 d-inline-block">{{product.category}}</a>
                                    <h2 class="font-size-25 text-lh-1dot2">{{product.title}}</h2>
                                    <div class="mb-2">
                                        <a class="d-inline-flex align-items-center small font-size-15 text-lh-1">
                                            <div class="text-warning mr-2">
                                                {% if product.rating_count == 0 %}
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                {% endif %}
                                                
                                                {% if product.product_rating >= 1 and product.product_rating < 2 %}
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>                                                {% endif %}
                          
                                                {% if product.product_rating >= 2 and product.product_rating < 3 %}
                                                    <small class="fas fa-star"></small>
                                                    <small class="fas fa-star"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if product.product_rating >= 3 and product.product_rating < 4 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if product.product_rating >= 4 and product.product_rating < 5 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if product.product_rating >= 5 and product.product_rating < 6 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                {% endif %}
                                            </div>
                                            <span class="text-secondary font-size-13">({{product.rating_count}} customer review{{product.rating_count|pluralize:"s"}})</span>
                                        </a>
                                    </div>
                                    <div class="d-md-flex align-items-center">
                                        <a href="{% url "store:brand-shop" meta_title=product.brand.meta_title %}" class="max-width-150 ml-n2 mb-2 mb-md-0 d-block"><img class="img-fluid" src="{{product.brand.image.url}}" alt="Image Description"></a>
                                        {% comment %} <div class="ml-md-3 text-gray-9 font-size-14">Availability: <span class="text-green font-weight-bold">{{product.stock_qty}} in stock</span></div> {% endcomment %}
                                    </div>
                                </div>
                                <p>condition: <span>{{product.product_condition}}</span></p>
                                {% if product.staff_ref %}<p>ref: {{product.staff_ref}}</p>{% endif %}
                                <div class="flex-horizontal-center flex-wrap mb-4">
                                    <a href="{% url "core:buyer-wishlist" %}" class="text-gray-6 font-size-13 mr-2"><i class="ec ec-favorites mr-1 font-size-15"></i> Wishlist</a>
                                    {% comment %} <a href="#" class="text-gray-6 font-size-13 ml-2"><i class="ec ec-compare mr-1 font-size-15"></i> Compare</a> {% endcomment %}
                                </div>
                                <div class="mb-2">
                                    <ul class="font-size-14 pl-3 ml-1 text-gray-110">
                                        {{product.mini_description|safe}}
                                        {% comment %} <li>4.5 inch HD Touch Screen (1280 x 720)</li>
                                        <li>Android 4.4 KitKat OS</li>
                                        <li>1.4 GHz Quad Core™ Processor</li>
                                        <li>20 MP Electro and 28 megapixel CMOS rear camera</li> {% endcomment %}
                                    </ul>
                                </div>
                                <p><strong>SKU</strong>: {{product.sku}}</p>
                                <div class="mb-4">
                                    <div class="d-flex align-items-baseline">
                                        <ins class="font-size-36 text-decoration-none">TND {{product.price}}</ins>
                                        {% if product.old_price %}
                                            <del class="font-size-20 ml-2 text-gray-6">TND {{product.old_price}}</del>
                                        {% endif %}
                                    </div>
                                </div>
                                {% if product.colors %}
                                <div class="border-top border-bottom py-3 mb-4">
                                    <div class="d-flex align-items-center">
                                        <h6 class="font-size-14 mb-0">Color</h6>
                                        <!-- Select -->
                                        <select class="product-color-{{ product.id }} js-select selectpicker dropdown-select ml-3"
                                            data-style="btn-sm bg-white font-weight-normal py-2 border">
                                            {% for color in product.get_colors_list %}
                                                <option value="{{ color }}">{{ color }}</option>
                                            {% endfor %}
                                        </select>
                                        <!-- End Select -->
                                    </div>
                                </div>
                                {% endif %}
                                {% if product.sizes %}
                                <div class="border-top border-bottom py-3 mb-4">
                                    <div class="d-flex align-items-center">
                                        <h6 class="font-size-14 mb-0">Sizes</h6>
                                        <!-- Select -->
                                        <select class="product-size-{{ product.id }} js-select selectpicker dropdown-select ml-3"
                                            data-style="btn-sm bg-white font-weight-normal py-2 border">
                                            {% for size in product.get_sizes_list %}
                                                <option value="{{ size }}">{{ size }}</option>
                                            {% endfor %}
                                        </select>
                                        <!-- End Select -->
                                    </div>
                                </div>
                                {% endif %}


                                {% for type in product.product_types.all %}
                                    <div class="border-top border-bottom py-3 mb-4">
                                        <div class="d-flex align-items-center">
                                            <h6 class="font-size-14 mb-0">{{ type.title }}</h6>
                                            <select class="product-type-{{ type.id }} js-select selectpicker dropdown-select ml-3"
                                                    data-style="btn-sm bg-white font-weight-normal py-2 border">
                                                {% for choice in type.choices.all %}
                                                    <option data-image="{% if choice.image %}{{ choice.image.image.url }}{% endif %}" value="{{ choice.title }}" {% if forloop.first %} selected {% endif %}>
                                                        {{ choice.title }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                {% endfor %}
                            
                                

                                
                                <div class="d-md-flex align-items-end mb-3">
                                    <div class="max-width-150 mb-4 mb-md-0">
                                        <h6 class="font-size-14">Quantity</h6>
                                        <!-- Quantity -->
                                        <div class="border rounded-pill py-2 px-3 border-color-1">
                                            <div class="js-quantity row align-items-center">
                                                <div class="col">
                                                    <input class="product-quantity-{{product.id}} js-result form-control h-auto border-0 rounded p-0 shadow-none" type="text" value="1">
                                                </div>
                                                <div class="col-auto pr-1">
                                                    <a class="js-minus btn btn-icon btn-xs btn-outline-secondary rounded-circle border-0" href="javascript:;">
                                                        <small class="fas fa-minus btn-icon__inner"></small>
                                                    </a>
                                                    <a class="js-plus btn btn-icon btn-xs btn-outline-secondary rounded-circle border-0" href="javascript:;">
                                                        <small class="fas fa-plus btn-icon__inner"></small>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Quantity -->
                                    </div>



                                    <input type="hidden" class="product-tax-fee-{{ product.id }}" value="{{ new_rate_|floatformat:2 }}" />
                                    <input type="hidden" class="product-processing-fee-{{ product.id }}" value="{{ service_fee_rate_ }}" />
                                    <input type="hidden" class="product-vendor-{{ product.id }}" value="{{ product.vendor.id }}" />
                                    <input type="hidden" class="product-vendor-name-{{ product.id }}" value="{{ product.vendor.shop_name }}" />
                                    <input type="hidden" class="product-brand-{{ product.id }}" value="{{ product.brand }}" />
                                    
                                    <input type="hidden" class="product-types_choices-{{ product.id }}" value="{}" />
                                    <input type="hidden" class="product-gz_coins-{{ product.id }}" value="{{ product.gz_coins }}" />
                                    <input type="hidden" class="product-shipping_amount-{{ product.id }}" value="{{ product.shipping_amount }}" />
                                    {% comment %} <input type="hidden" class="product-quantity-{{ product.id }}" value="{{ product.stock_qty }}" id="product-quantity" class="w-25 mb-10 product-quantity-{{ product.id }}" /> {% endcomment %}
                                    <input type="hidden" class="product-price-{{ product.id }}" value="{{ product.price }}" />
                                    <input type="hidden" class="product-pid-{{ product.id }}" value="{{ product.pid }}" />
                                    <input type="hidden" class="product-image-{{ product.id }}" value="{{ product.image.url }}" />
                                    <input type="hidden" class="product-id-{{ product.id }}" value="{{ product.id }}" />
                                    <input type="hidden" class="product-title-{{ product.id }}" value="{{ product.title }}" />
                  
                                    <input type="hidden" class="product-is_digital-{{ product.id }}" value="{{ product.digital }}" />
                                    
                                    <input type="hidden" class="product-meta-title-{{ product.id }}" value="{{ product.meta_title }}" />
                                    <input type="hidden" class="product-meta_title-{{ product.id }}" value="{{ product.meta_title }}" />
                                    <input type="hidden" class="product-slug-{{ product.id }}" value="{{ product.slug }}" />                      
                                    <input type="hidden" class="product-vendor-slug-{{ p.id }}" value="{{ product.vendor.slug }}" />
                                    
                                    <input type="hidden" class="product-stock-qty-{{ product.id }}" value="{{ product.stock_qty }}" />
                                    <input type="hidden" class="product-in-stock-{{ product.id }}" value="{{ product.in_stock }}" />












                                    <input type="hidden" class="product-tax-fee-{{ product.id }}" value="{{ new_rate_|floatformat:2 }}" />
                                    <input type="hidden" class="product-processing-fee-{{ product.id }}" value="{{ service_fee_rate_ }}" />
                                    <input type="hidden" class="product-vendor-{{ product.id }}" value="{{ product.vendor.id }}" />
                                    <input type="hidden" class="product-vendor-name-{{ product.id }}" value="{{ product.vendor.shop_name }}" />
                                    <input type="hidden" class="product-brand-{{ product.id }}" value="{{ product.brand }}" />
                                    
                                    <input type="hidden" class="product-types_choices-{{ product.id }}" value="{}" />
                                    <input type="hidden" class="product-gz_coins-{{ product.id }}" value="{{ product.gz_coins }}" />
                                    <input type="hidden" class="product-shipping_amount-{{ product.id }}" value="{{ product.shipping_amount }}" />
                                    {% comment %} <input type="hidden" class="product-quantity-{{ product.id }}" value="{{ product.stock_qty }}" id="product-quantity" class="w-25 mb-10 product-quantity-{{ product.id }}" /> {% endcomment %}
                                    <input type="hidden" class="product-price-{{ product.id }}" value="{{ product.price }}" />
                                    <input type="hidden" class="product-pid-{{ product.id }}" value="{{ product.pid }}" />
                                    <input type="hidden" class="product-image-{{ product.id }}" value="{{ product.image.url }}" />
                                    <input type="hidden" class="product-id-{{ product.id }}" value="{{ product.id }}" />
                                    <input type="hidden" class="product-title-{{ product.id }}" value="{{ product.title }}" />
                  
                                    <input type="hidden" class="product-is_digital-{{ product.id }}" value="{{ product.digital }}" />
                                    
                                    <input type="hidden" class="product-meta-title-{{ product.id }}" value="{{ product.meta_title }}" />
                                    <input type="hidden" class="product-meta_title-{{ product.id }}" value="{{ product.meta_title }}" />
                                    <input type="hidden" class="product-slug-{{ product.id }}" value="{{ product.slug }}" />                      
                                    <input type="hidden" class="product-vendor-slug-{{ p.id }}" value="{{ product.vendor.slug }}" />
                                    
                                    <input type="hidden" class="product-stock-qty-{{ product.id }}" value="{{ product.stock_qty }}" />
                                    <input type="hidden" class="product-in-stock-{{ product.id }}" value="{{ product.in_stock }}" />


                                    <div class="ml-md-3">
                                        <a class="btn px-5 btn-primary-dark transition-3d-hover add-to-cart-btn" data-index="{{product.id}}"><i class="ec ec-add-to-cart mr-2 font-size-20"></i> Add to Cart</a>
                                    </div>
                                    <div class="ml-md-3">
                                        <a href="store:cart-view" class="btn px-5 btn-primary-dark transition-3d-hover add-to-cart-btn buy-now" data-index="{{product.id}}"><i class="ec ec-add-to-cart mr-2 font-size-20"></i> buy now</a>
                                    </div>
                                    <script src="https://unpkg.com/sweetalert2@7.8.2/dist/sweetalert2.all.js"></script>
                                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                                    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                                    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                                    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                                    <script>
                                        $(".add-to-cart-btn").on("click", function(){
                                            
                                            var selectedChoices = {};
                                            {% for type in product.product_types.all %}
                                                // Get the parent div using the class
                                                const parentDiv = document.querySelector('.product-type-{{ type.id }}');
                                                
                                                if (parentDiv) {
                                                    // Find the select element within the parent div
                                                    const selectElement = parentDiv.querySelector('select');
                                                    
                                                    if (selectElement) {
                                                        // Update the selectedChoices object with the current selected value
                                                        selectedChoices["{{ type.title }}"] = selectElement.value;
                                    
                                                        // Add event listener to update selectedChoices when the selection changes
                                                        selectElement.addEventListener('change', function() {
                                                            selectedChoices["{{ type.title }}"] = this.value;
                                                            console.log(`Updated ${'{{ type.title }}'} selection:`, selectedChoices["{{ type.title }}"]);
                                                        });
                                                    }
                                                }
                                            {% endfor %}

                                            console.log(selectedChoices);
                                            // Update value of hidden input field
                                            var hiddenInput = document.querySelector('.product-types_choices-{{ product.id }}');
                                            console.log(JSON.stringify(selectedChoices))
                                            hiddenInput.value = JSON.stringify(selectedChoices);

                                            let this_val = $(this)
                                            let index = this_val.attr("data-index")
                                            
                                            let color = $(".product-color-" + index).find(":selected").val() || "";
                                            let size = $(".product-size-" + index).find(":selected").val() || "";
                                            let quantity = $(".product-quantity-" + index).val()
                                            let product_title = $(".product-title-" + index).val()
                                        
                                            let product_id = $(".product-id-" + index).val()
                                            let product_meta_title = $(".product-meta_title-" + index).val()
                                            let product_is_digital = $(".product-is_digital-" + index).val()
                                            let product_price = $(".product-price-" + index).val()
                                            let product_types_choices = $(".product-types_choices-" + index).val()
                                            let product_shipping_amount = $(".product-shipping_amount-" + index).val()
                                            let product_tax_fee = $(".product-tax-fee-" + index).val()
                                            let product_processing_fee = $(".product-processing-fee-" + index).val()
                                            let product_vendor = $(".product-vendor-" + index).val() 
                                            let product_brand = $(".product-brand-" + index).val() 
                                            let product_gz_coins = $(".product-gz_coins-" + index).val() 
                                            let product_vendor_slug = $(".product-vendor-slug-" + index).val() 
                                    
                                            let product_stock_qty = $(".product-stock-qty-" + index).val() 
                                            let product_in_stock = $(".product-in-stock-" + index).val() 
                                        
                                            let product_pid = $(".product-pid-" + index).val()
                                            let product_image = $(".product-image-" + index).val()
                                        
                                        
                                            console.log("color:", color);
                                            console.log("size:", size);
                                            console.log("Quantity:", quantity);
                                            console.log("Title:", product_title);
                                            console.log("Price:", product_price);
                                            console.log("Meta title:", product_meta_title);
                                            console.log("ID:", product_id);
                                            console.log("PID:", product_pid);
                                            console.log("Digital?:", product_is_digital);
                                            console.log("GZ Coins:", product_gz_coins, "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz");
                                            console.log("product_types_choices:", product_types_choices);
                                            console.log("Image:", product_image);
                                            console.log("product_shipping_amount:", product_shipping_amount);
                                            console.log("product_vendor:", product_vendor);
                                            console.log("product_brand:", product_brand);
                                            console.log("Index:", index);
                                            console.log("Currrent Element:", this_val);
                                            console.log("product_processing_fee:", product_processing_fee);
                                            console.log("product_tax_fee:", product_tax_fee);
                                            console.log("product_vendor_slug:", product_vendor_slug);
                                            console.log("product_stock_qty:", product_stock_qty);
                                            console.log("product_in_stock:", product_in_stock);
                                    
                                            if (parseInt(quantity) > parseInt(product_stock_qty)) {
                                                Swal.fire({
                                                    icon: 'warning',
                                                    title: 'Oops... Stock Qty Exceeded!',
                                                    text: 'You are exceeding the stock current quantity of ' + product_stock_qty,
                                                })
                                                $(".product-quantity-"+index).val(product_stock_qty)
                                            } else {
                                                $.ajax({
                                                    url: '/ajax/add-to-cart/',
                                                    data: {
                                                        'id': product_id,
                                                        'product_meta_title': product_meta_title,
                                                        'product_is_digital': product_is_digital,
                                                        'product_types_choices': product_types_choices,
                                                        'pid': product_pid,
                                                        'product_types_choices': product_types_choices,
                                                        'image': product_image,
                                                        'qty': quantity,
                                                        'title': product_title,
                                                        'shipping_amount': product_shipping_amount,
                                                        'product_gz_coins': product_gz_coins,
                                                        'vendor': product_vendor,
                                                        'product_brand': product_brand,
                                                        'price': product_price,
                                                        'product_processing_fee': product_processing_fee,
                                                        'product_tax_fee': product_tax_fee,
                                                        'product_stock_qty': product_stock_qty,
                                                        'product_in_stock': product_in_stock,
                                                        'color': color,
                                                        'size': size,
                                                    },
                                                    dataType: 'json',
                                                    beforeSend: function(){
                                                        this_val.html("<i class='fas fa-spinner fa-spin'></i>")
                                    
                                                    },
                                                    success: function(response){
                                                        // this_val.html("✓")
                                                        this_val.html("Added to cart <i class='fas fa-check-circle'></i>")
                                    
                                                        console.log("Added Product to Cart!");
                                                        $(".cart-items-count").text(response.totalcartitems + " Items")
                                                        {% comment %} window.location.href="/my-cart" {% endcomment %}
                                            
                                                    }
                                                })
                                            }
                                    
                                        })
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Single Product Body -->
                <!-- Single Product Tab -->
                <div class="mb-8">
                    <div class="position-relative position-md-static px-md-6">
                        <ul class="nav nav-classic nav-tab nav-tab-lg justify-content-xl-center flex-nowrap flex-xl-wrap overflow-auto overflow-xl-visble border-0 pb-1 pb-xl-0 mb-n1 mb-xl-0" id="pills-tab-8" role="tablist">
                            {% if product.in_pack %}
                                <li class="nav-item flex-shrink-0 flex-xl-shrink-1 z-index-2">
                                    <a class="nav-link active" id="Jpills-one-example1-tab" data-toggle="pill" href="#Jpills-one-example1" role="tab" aria-controls="Jpills-one-example1" aria-selected="True">Accessories</a>
                                </li>
                            {% endif %}
                            <li class="nav-item flex-shrink-0 flex-xl-shrink-1 z-index-2">
                                <a class="nav-link {% if not product.in_pack %}active{% endif %}" id="Jpills-two-example1-tab" data-toggle="pill" href="#Jpills-two-example1" role="tab" aria-controls="Jpills-two-example1" aria-selected="{% if product.in_pack%}false{% else %}true{% endif %}">Description</a>
                            </li>
                            <li class="nav-item flex-shrink-0 flex-xl-shrink-1 z-index-2">
                                <a class="nav-link" id="Jpills-three-example1-tab" data-toggle="pill" href="#Jpills-three-example1" role="tab" aria-controls="Jpills-three-example1" aria-selected="false">Specification</a>
                            </li>
                            {% comment %} <li class="nav-item flex-shrink-0 flex-xl-shrink-1 z-index-2">
                                <a class="nav-link" id="Jpills-four-example1-tab" data-toggle="pill" href="#Jpills-four-example1" role="tab" aria-controls="Jpills-four-example1" aria-selected="false">Reviews</a>
                            </li> {% endcomment %}
                        </ul>
                    </div>
                    <!-- Tab Content -->
                    <div class="borders-radius-17 border p-4 mt-4 mt-md-0 px-lg-10 py-lg-9">
                        <div class="tab-content" id="Jpills-tabContent">
                            {% if product.in_pack %}
                                <div class="tab-pane fade active show" id="Jpills-one-example1" role="tabpanel" aria-labelledby="Jpills-one-example1-tab">
                                    <div class="row no-gutters">
                                        <div class="col mb-6 mb-md-0">
                                            <ul class="row list-unstyled products-group no-gutters border-bottom border-md-bottom-0">
                                                <li class="col-4 col-md-4 col-xl-2gdot5 product-item remove-divider-sm-down border-0">
                                                    <div class="product-item__outer h-100">
                                                        <div class="remove-prodcut-hover product-item__inner px-xl-4 p-3">
                                                            <div class="product-item__body pb-xl-2">
                                                                <div class="mb-2 d-none d-md-block"><a href="{% url "store:category-shop" meta_title=product.category.meta_title %}" class="font-size-12 text-gray-5">{{product.category.title}}</a></div>
                                                                <h5 class="mb-1 product-item__title d-none d-md-block"><a href="#" class="text-blue font-weight-bold">{{product.title}}</a></h5>
                                                                <div class="mb-2">
                                                                    <a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="d-block text-center"><img class="img-fluid" src="{% static "assets/img/212X200/img1.jpg" %}" alt="Image Description"></a>
                                                                </div>
                                                                <div class="flex-center-between mb-1 d-none d-md-block">
                                                                    <div class="prodcut-price">
                                                                        <div class="text-gray-100">{{product.price}}</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="col-4 col-md-4 col-xl-2gdot5 product-item remove-divider-sm-down">
                                                    <div class="product-item__outer h-100">
                                                        <div class="remove-prodcut-hover add-accessories product-item__inner px-xl-4 p-3">
                                                            <div class="product-item__body pb-xl-2">
                                                                <div class="mb-2 d-none d-md-block"><a href="{% url "store:category-shop" meta_title=product.category.meta_title %}" class="font-size-12 text-gray-5">{{product.category.title}}</a></div>
                                                                <h5 class="mb-1 product-item__title d-none d-md-block"><a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="text-blue font-weight-bold">{{product.title}}</a></h5>
                                                                <div class="mb-2">
                                                                    <a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="d-block text-center"><img class="img-fluid" src="{% static "assets/img/212X200/img2.jpg" %}" alt="Image Description"></a>
                                                                </div>
                                                                <div class="flex-center-between mb-1 d-none d-md-block">
                                                                    <div class="prodcut-price d-flex align-items-center position-relative">
                                                                        <ins class="font-size-20 text-red text-decoration-none">$1999,00</ins>
                                                                        <del class="font-size-12 tex-gray-6 position-absolute bottom-100">$2 299,00</del>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="col-4 col-md-4 col-xl-2gdot5 product-item remove-divider-sm-down remove-divider">
                                                    <div class="product-item__outer h-100">
                                                        <div class="remove-prodcut-hover add-accessories product-item__inner px-xl-4 p-3">
                                                            <div class="product-item__body pb-xl-2">
                                                                <div class="mb-2 d-none d-md-block"><a href="{% url "store:category-shop" meta_title=product.category.meta_title %}" class="font-size-12 text-gray-5">{{product.category.title}}</a></div>
                                                                <h5 class="mb-1 product-item__title d-none d-md-block"><a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="text-blue font-weight-bold">{{product.title}}</a></h5>
                                                                <div class="mb-2">
                                                                    <a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="d-block text-center"><img class="img-fluid" src="{% static "assets/img/212X200/img3.jpg" %}" alt="Image Description"></a>
                                                                </div>
                                                                <div class="flex-center-between mb-1 d-none d-md-block">
                                                                    <div class="prodcut-price">
                                                                        <div class="text-gray-100">$685,00</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                            <div class="form-check pl-4 pl-md-0 ml-md-4 mb-2 pb-2 pb-md-0 mb-md-0 border-bottom border-md-bottom-0">
                                                <input class="form-check-input" type="checkbox" value="" id="inlineCheckbox1" checked disabled>
                                                <label class="form-check-label mb-1" for="inlineCheckbox1">
                                                    <strong>This product: </strong> Ultra Wireless S50 Headphones S50 with Bluetooth - <span class="text-red font-size-16">$35.00</span>
                                                </label>
                                            </div>
                                            <div class="form-check pl-4 pl-md-0 ml-md-4 mb-2 pb-2 pb-md-0 mb-md-0 border-bottom border-md-bottom-0">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option1" checked>
                                                <label class="form-check-label mb-1 text-blue" for="inlineCheckbox2">
                                                    <span class="text-decoration-on cursor-pointer-on">Universal Headphones Case in Black</span> - <span class="text-red font-size-16">$159.00</span>
                                                </label>
                                            </div>
                                            <div class="form-check pl-4 pl-md-0 ml-md-4 mb-2 pb-2 pb-md-0 mb-md-0 border-bottom border-md-bottom-0">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option2" checked>
                                                <label class="form-check-label mb-1 text-blue" for="inlineCheckbox3">
                                                    <span class="text-decoration-on cursor-pointer-on">Headphones USB Wires</span> - <span class="text-red font-size-16">$50.00</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-auto">
                                            <div class="mr-xl-15">
                                                <div class="mb-3">
                                                    <div class="text-red font-size-26 text-lh-1dot2">$244.00</div>
                                                    <div class="text-gray-6">for 3 item(s)</div>
                                                </div>
                                                <a href="#" class="btn btn-sm btn-block btn-primary-dark btn-wide transition-3d-hover">Add all to cart</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            <div class="tab-pane fade {% if not product.in_pack %}active show{% endif %}" id="Jpills-two-example1" role="tabpanel" aria-labelledby="Jpills-two-example1-tab">
                                {{product.description|safe}}
                            </div>
                            <div class="tab-pane fade" id="Jpills-three-example1" role="tabpanel" aria-labelledby="Jpills-three-example1-tab">
                                <div class="mx-md-5 pt-1">
                                    {% comment %} <div class="table-responsive mb-4">
                                        <table class="table table-hover">
                                            <tbody>
                                                <tr>
                                                    <th class="px-4 px-xl-5 border-top-0">Weight</th>
                                                    <td class="border-top-0">7.25kg</td>
                                                </tr>
                                                <tr>
                                                    <th class="px-4 px-xl-5">Dimensions</th>
                                                    <td>90 x 60 x 90 cm</td>
                                                </tr>
                                                <tr>
                                                    <th class="px-4 px-xl-5">Size</th>
                                                    <td>One Size Fits all</td>
                                                </tr>
                                                <tr>
                                                    <th class="px-4 px-xl-5">color</th>
                                                    <td>Black with Red, White with Gold</td>
                                                </tr>
                                                <tr>
                                                    <th class="px-4 px-xl-5">Guarantee</th>
                                                    <td>5 years</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div> {% endcomment %}
                                    <h3 class="font-size-18 mb-4">Specifications</h3>
                                    {% for spec in product.specifications.all %}
                                        <div class="table-responsive">
                                            
                                            <table class="table table-hover">
                                                <tbody>
                                                    {% for value in spec.values.all %}
                                                        <tr>
                                                            <th class="px-4 px-xl-5 border-top-0">{{value.title}}</th>
                                                            <td class="border-top-0">{{value.description}}</td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% comment %} <div class="tab-pane fade" id="Jpills-four-example1" role="tabpanel" aria-labelledby="Jpills-four-example1-tab">
                                <div class="row mb-8">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <h3 class="font-size-18 mb-6">Based on {{product.rating_count}} reviews</h3>
                                            <h2 class="font-size-30 font-weight-bold text-lh-1 mb-0">{{product.product_rating|round_num}}</h2>
                                            <div class="text-lh-1">overall</div>
                                        </div>

                                        <!-- Ratings -->
                                        <ul class="list-unstyled">
                                            <li class="py-1">
                                                <a class="row align-items-center mx-gutters-2 font-size-1" href="javascript:;">
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="progress ml-xl-5" style="height: 10px; width: 200px;">
                                                            <div class="progress-bar" role="progressbar" style="width: {{product|rating_percentage:5}}%;" aria-valuenow="{{product|rating_percentage:5}}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto text-right">
                                                        <span class="text-gray-90">{{five_star}}</span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="py-1">
                                                <a class="row align-items-center mx-gutters-2 font-size-1" href="javascript:;">
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="progress ml-xl-5" style="height: 10px; width: 200px;">
                                                            <div class="progress-bar" role="progressbar" style="width: {{product|rating_percentage:4}}%;" aria-valuenow="{{product|rating_percentage:4}}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto text-right">
                                                        <span class="text-gray-90">{{four_star}}</span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="py-1">
                                                <a class="row align-items-center mx-gutters-2 font-size-1" href="javascript:;">
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="progress ml-xl-5" style="height: 10px; width: 200px;">
                                                            <div class="progress-bar" role="progressbar" style="width: {{product|rating_percentage:3}}%;" aria-valuenow="{{product|rating_percentage:3}}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto text-right">
                                                        <span class="text-gray-90">{{three_star}}</span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="py-1">
                                                <a class="row align-items-center mx-gutters-2 font-size-1" href="javascript:;">
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                            <small class="fas fa-star"></small>
                                                            <small class="fas fa-star"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="progress ml-xl-5" style="height: 10px; width: 200px;">
                                                            <div class="progress-bar" role="progressbar" style="width: {{product|rating_percentage:2}}%;" aria-valuenow="{{product|rating_percentage:2}}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto text-right">
                                                        <span class="text-gray-90">{{two_star}}</span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="py-1">
                                                <a class="row align-items-center mx-gutters-2 font-size-1" href="javascript:;">
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                            <small class="fas fa-star"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                            <small class="far fa-star text-muted"></small>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto mb-2 mb-md-0">
                                                        <div class="progress ml-xl-5" style="height: 10px; width: 200px;">
                                                            <div class="progress-bar" role="progressbar" style="width: {{product|rating_percentage:1}}%;" aria-valuenow="{{product|rating_percentage:1}}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto text-right">
                                                        <span class="text-muted">{{one_star}}</span>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                        <!-- End Ratings -->
                                    </div>
                                    {% if user.is_authenticated %}
                                        <div class="col-md-6">
                                            <h3 class="font-size-18 mb-5">Add a review</h3>
                                            <!-- Form -->
                                            <form class="js-validate" method="POST" id="commentForm" action="{% url 'store:add-review' product.id %}">
                                                {% csrf_token %}
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4 col-lg-3">
                                                        <label for="rating" class="form-label mb-0">Your Rating</label>
                                                    </div>
                                                    <div class="col-md-8 col-lg-9">
                                                        {{ review_form.rating }}
                                                    </div>
                                                </div>
                                                <div class="js-form-message form-group mb-3 row">
                                                    <div class="col-md-4 col-lg-3">
                                                        <label for="descriptionTextarea" class="form-label">Your Review</label>
                                                    </div>
                                                    <div class="col-md-8 col-lg-9">
                                                        {{ review_form.review }}
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="offset-md-4 offset-lg-3 col-auto">
                                                        <button type="submit" class="btn btn-primary-dark btn-wide transition-3d-hover">Add Review</button>
                                                    </div>
                                                </div>
                                            </form>
                                            <div id="review-res"></div>
                                            
                                            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
                                            <script>
                                                $(document).ready(function() {
                                                    const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                                            
                                                    $("#commentForm").submit(function(e) {
                                                        e.preventDefault(); // Prevent form from submitting normally
                                            
                                                        let dt = new Date();
                                                        let time = dt.getDay() + " " + monthNames[dt.getUTCMonth()] + ", " + dt.getFullYear();
                                            
                                                        $.ajax({
                                                            data: $(this).serialize(),
                                                            method: $(this).attr("method"),
                                                            url: $(this).attr("action"),
                                                            dataType: "json",
                                                            headers: {
                                                                "X-CSRFToken": "{{ csrf_token }}"
                                                            },
                                                            success: function(res) {
                                                                console.log("Comment Saved to DB...");
                                                                if (res.bool == true) {
                                                                    $("#review-res").html("Review added successfully, awaiting moderation.");
                                                                    $("#commentForm").hide();
                                                                } else {
                                                                    $("#review-res").html("There was an error submitting your review. Please try again.");
                                                                }
                                                            },
                                                            error: function() {
                                                                $("#review-res").html("There was an error submitting your review. Please try again.");
                                                            }
                                                        });
                                                    });
                                                });
                                            </script>
                                            <!-- End Form -->
                                        </div>
                                    {% endif %}
                                </div>
                                <!-- Review -->
                                {% for r in reviews %}
                                <div class="border-bottom border-color-1 pb-4 mb-4">
                                    <!-- Review Rating -->
                                    <div class="d-flex justify-content-between align-items-center text-secondary font-size-1 mb-2">
                                        <div class="text-warning text-ls-n2 font-size-16" style="width: 80px;">
                                                {% if product.rating_count == 0 %}
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                {% endif %}
                                                
                                                {% if r.rating >= 1 and r.rating < 2 %}
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>                                                {% endif %}
                          
                                                {% if r.rating >= 2 and r.rating < 3 %}
                                                    <small class="fas fa-star"></small>
                                                    <small class="fas fa-star"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                    <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if r.rating >= 3 and r.rating < 4 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if r.rating >= 4 and r.rating < 5 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="far fa-star text-muted"></small>
                                                {% endif %}
                          
                                                {% if r.rating >= 5 and r.rating < 6 %}
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                {% endif %}
                                        </div>
                                    </div>
                                    <!-- End Review Rating -->

                                    <p class="text-gray-90">{{r.review}}</p>

                                    <!-- Reviewer -->
                                    <div class="mb-2">
                                        <strong>{{r.user.first_name}}</strong>
                                        <span class="font-size-13 text-gray-23">- {{r.date}}</span>
                                    </div>
                                    <!-- End Reviewer -->
                                </div>
                                {% endfor %}

                                <!-- End Review -->
                            </div> {% endcomment %}
                        </div>
                    </div>
                    <!-- End Tab Content -->
                </div>
                <!-- End Single Product Tab -->
                <!-- Related products -->
                <div class="mb-6">
                    <div class="d-flex justify-content-between align-items-center border-bottom border-color-1 flex-lg-nowrap flex-wrap mb-4">
                        <h3 class="section-title mb-0 pb-2 font-size-22">Related products</h3>
                    </div>
                    <ul class="row list-unstyled products-group no-gutters">
                        {% for product in product.related_products.all %}
                            <li class="col-6 col-md-3 col-xl-2gdot4-only col-wd-2 product-item">
                                <div class="product-item__outer h-100">
                                    <div class="product-item__inner px-xl-4 p-3">
                                        <div class="product-item__body pb-xl-2">
                                            <div class="mb-2"><a href="{% url "store:category-shop" meta_title=product.category.meta_title %}" class="font-size-12 text-gray-5">{{product.category}}</a></div>
                                            <h5 class="mb-1 product-item__title"><a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="text-blue font-weight-bold">{{product.title}}</a></h5>
                                            <div class="mb-2">
                                                <a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="d-block text-center"><img class="img-fluid" src="{{product.image.url}}" alt="Image Description"></a>
                                            </div>
                                            <div class="flex-center-between mb-1">
                                                <div class="prodcut-price">
                                                    <div class="text-gray-100">TND {{product.price}}</div>
                                                </div>
                                                <div class="d-none d-xl-block prodcut-add-cart">
                                                    <a href="{% url "store:product-detail" meta_title=product.meta_title %}" class="btn-add-cart btn-primary transition-3d-hover"><i class="ec ec-add-to-cart"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="product-item__footer">
                                            <div class="border-top pt-2 flex-center-between flex-wrap">
                                                {% comment %} <a href="../shop/compare.html" class="text-gray-6 font-size-13"><i class="ec ec-compare mr-1 font-size-15"></i> Compare</a> {% endcomment %}
                                                <a href="{% url "core:buyer-wishlist" %}" class="text-gray-6 font-size-13"><i class="ec ec-favorites mr-1 font-size-15"></i> Wishlist</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- End Related products -->
                <!-- Brand Carousel -->
                <div class="container mb-8">
                    <div class="py-2 border-top border-bottom">
                        <div class="js-slick-carousel u-slick my-1"
                            data-slides-show="5"
                            data-slides-scroll="1"
                            data-arrows-classes="d-none d-lg-inline-block u-slick__arrow-normal u-slick__arrow-centered--y"
                            data-arrow-left-classes="fa fa-angle-left u-slick__arrow-classic-inner--left z-index-9"
                            data-arrow-right-classes="fa fa-angle-right u-slick__arrow-classic-inner--right"
                            data-responsive='[{
                                "breakpoint": 992,
                                "settings": {
                                    "slidesToShow": 2
                                }
                            }, {
                                "breakpoint": 768,
                                "settings": {
                                    "slidesToShow": 1
                                }
                            }, {
                                "breakpoint": 554,
                                "settings": {
                                    "slidesToShow": 1
                                }
                            }]'>
                            {% for brand in brands %}
                                <div class="js-slide">
                                    <a href="{% url "store:brand-shop" meta_title=brand.meta_title %}" class="link-hover__brand">
                                        <img class="img-fluid m-auto max-height-50" src="{{brand.image.url}}" alt="{{brand.alt}}">
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            <!-- End Brand Carousel -->
            </div>
        </main>
        <!-- ========== END MAIN CONTENT ========== -->

        <!-- ========== FOOTER ========== -->
        {% include "Template\html\home\footer.html" %}
        <!-- ========== END FOOTER ========== -->

        <!-- ========== SECONDARY CONTENTS ========== -->
        <!-- Account Sidebar Navigation -->
        {% comment %} <aside id="sidebarContent" class="u-sidebar u-sidebar__lg" aria-labelledby="sidebarNavToggler">
            <div class="u-sidebar__scroller">
                <div class="u-sidebar__container">
                    <div class="js-scrollbar u-header-sidebar__footer-offset pb-3">
                        <!-- Toggle Button -->
                        <div class="d-flex align-items-center pt-4 px-7">
                            <button type="button" class="close ml-auto"
                                aria-controls="sidebarContent"
                                aria-haspopup="true"
                                aria-expanded="false"
                                data-unfold-event="click"
                                data-unfold-hide-on-scroll="false"
                                data-unfold-target="#sidebarContent"
                                data-unfold-type="css-animation"
                                data-unfold-animation-in="fadeInRight"
                                data-unfold-animation-out="fadeOutRight"
                                data-unfold-duration="500">
                                <i class="ec ec-close-remove"></i>
                            </button>
                        </div>
                        <!-- End Toggle Button -->

                        <!-- Content -->
                        <div class="js-scrollbar u-sidebar__body">
                            <div class="u-sidebar__content u-header-sidebar__content">
                                <form class="js-validate">
                                    <!-- Login -->
                                    <div id="login" data-target-group="idForm">
                                        <!-- Title -->
                                        <header class="text-center mb-7">
                                        <h2 class="h4 mb-0">Welcome Back!</h2>
                                        <p>Login to manage your account.</p>
                                        </header>
                                        <!-- End Title -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                                <label class="sr-only" for="signinEmail">Email</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="signinEmailLabel">
                                                            <span class="fas fa-user"></span>
                                                        </span>
                                                    </div>
                                                    <input type="email" class="form-control" name="email" id="signinEmail" placeholder="Email" aria-label="Email" aria-describedby="signinEmailLabel" required
                                                    data-msg="Please enter a valid email address."
                                                    data-error-class="u-has-error"
                                                    data-success-class="u-has-success">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Form Group -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                              <label class="sr-only" for="signinPassword">Password</label>
                                              <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text" id="signinPasswordLabel">
                                                        <span class="fas fa-lock"></span>
                                                    </span>
                                                </div>
                                                <input type="password" class="form-control" name="password" id="signinPassword" placeholder="Password" aria-label="Password" aria-describedby="signinPasswordLabel" required
                                                   data-msg="Your password is invalid. Please try again."
                                                   data-error-class="u-has-error"
                                                   data-success-class="u-has-success">
                                              </div>
                                            </div>
                                        </div>
                                        <!-- End Form Group -->

                                        <div class="d-flex justify-content-end mb-4">
                                            <a class="js-animation-link small link-muted" href="javascript:;"
                                               data-target="#forgotPassword"
                                               data-link-group="idForm"
                                               data-animation-in="slideInUp">Forgot Password?</a>
                                        </div>

                                        <div class="mb-2">
                                            <button type="submit" class="btn btn-block btn-sm btn-primary transition-3d-hover">Login</button>
                                        </div>

                                        <div class="text-center mb-4">
                                            <span class="small text-muted">Do not have an account?</span>
                                            <a class="js-animation-link small text-dark" href="javascript:;"
                                               data-target="#signup"
                                               data-link-group="idForm"
                                               data-animation-in="slideInUp">Signup
                                            </a>
                                        </div>

                                        <div class="text-center">
                                            <span class="u-divider u-divider--xs u-divider--text mb-4">OR</span>
                                        </div>

                                        <!-- Login Buttons -->
                                        <div class="d-flex">
                                            <a class="btn btn-block btn-sm btn-soft-facebook transition-3d-hover mr-1" href="#">
                                              <span class="fab fa-facebook-square mr-1"></span>
                                              Facebook
                                            </a>
                                            <a class="btn btn-block btn-sm btn-soft-google transition-3d-hover ml-1 mt-0" href="#">
                                              <span class="fab fa-google mr-1"></span>
                                              Google
                                            </a>
                                        </div>
                                        <!-- End Login Buttons -->
                                    </div>

                                    <!-- Signup -->
                                    <div id="signup" style="display: none; opacity: 0;" data-target-group="idForm">
                                        <!-- Title -->
                                        <header class="text-center mb-7">
                                        <h2 class="h4 mb-0">Welcome to Tokyo Store.</h2>
                                        <p>Fill out the form to get started.</p>
                                        </header>
                                        <!-- End Title -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                                <label class="sr-only" for="signupEmail">Email</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="signupEmailLabel">
                                                            <span class="fas fa-user"></span>
                                                        </span>
                                                    </div>
                                                    <input type="email" class="form-control" name="email" id="signupEmail" placeholder="Email" aria-label="Email" aria-describedby="signupEmailLabel" required
                                                    data-msg="Please enter a valid email address."
                                                    data-error-class="u-has-error"
                                                    data-success-class="u-has-success">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Input -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                                <label class="sr-only" for="signupPassword">Password</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="signupPasswordLabel">
                                                            <span class="fas fa-lock"></span>
                                                        </span>
                                                    </div>
                                                    <input type="password" class="form-control" name="password" id="signupPassword" placeholder="Password" aria-label="Password" aria-describedby="signupPasswordLabel" required
                                                    data-msg="Your password is invalid. Please try again."
                                                    data-error-class="u-has-error"
                                                    data-success-class="u-has-success">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Input -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                            <label class="sr-only" for="signupConfirmPassword">Confirm Password</label>
                                                <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text" id="signupConfirmPasswordLabel">
                                                        <span class="fas fa-key"></span>
                                                    </span>
                                                </div>
                                                <input type="password" class="form-control" name="confirmPassword" id="signupConfirmPassword" placeholder="Confirm Password" aria-label="Confirm Password" aria-describedby="signupConfirmPasswordLabel" required
                                                data-msg="Password does not match the confirm password."
                                                data-error-class="u-has-error"
                                                data-success-class="u-has-success">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Input -->

                                        <div class="mb-2">
                                            <button type="submit" class="btn btn-block btn-sm btn-primary transition-3d-hover">Get Started</button>
                                        </div>

                                        <div class="text-center mb-4">
                                            <span class="small text-muted">Already have an account?</span>
                                            <a class="js-animation-link small text-dark" href="javascript:;"
                                                data-target="#login"
                                                data-link-group="idForm"
                                                data-animation-in="slideInUp">Login
                                            </a>
                                        </div>

                                        <div class="text-center">
                                            <span class="u-divider u-divider--xs u-divider--text mb-4">OR</span>
                                        </div>

                                        <!-- Login Buttons -->
                                        <div class="d-flex">
                                            <a class="btn btn-block btn-sm btn-soft-facebook transition-3d-hover mr-1" href="#">
                                                <span class="fab fa-facebook-square mr-1"></span>
                                                Facebook
                                            </a>
                                            <a class="btn btn-block btn-sm btn-soft-google transition-3d-hover ml-1 mt-0" href="#">
                                                <span class="fab fa-google mr-1"></span>
                                                Google
                                            </a>
                                        </div>
                                        <!-- End Login Buttons -->
                                    </div>
                                    <!-- End Signup -->

                                    <!-- Forgot Password -->
                                    <div id="forgotPassword" style="display: none; opacity: 0;" data-target-group="idForm">
                                        <!-- Title -->
                                        <header class="text-center mb-7">
                                            <h2 class="h4 mb-0">Recover Password.</h2>
                                            <p>Enter your email address and an email with instructions will be sent to you.</p>
                                        </header>
                                        <!-- End Title -->

                                        <!-- Form Group -->
                                        <div class="form-group">
                                            <div class="js-form-message js-focus-state">
                                                <label class="sr-only" for="recoverEmail">Your email</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="recoverEmailLabel">
                                                            <span class="fas fa-user"></span>
                                                        </span>
                                                    </div>
                                                    <input type="email" class="form-control" name="email" id="recoverEmail" placeholder="Your email" aria-label="Your email" aria-describedby="recoverEmailLabel" required
                                                    data-msg="Please enter a valid email address."
                                                    data-error-class="u-has-error"
                                                    data-success-class="u-has-success">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Form Group -->

                                        <div class="mb-2">
                                            <button type="submit" class="btn btn-block btn-sm btn-primary transition-3d-hover">Recover Password</button>
                                        </div>

                                        <div class="text-center mb-4">
                                            <span class="small text-muted">Remember your password?</span>
                                            <a class="js-animation-link small" href="javascript:;"
                                               data-target="#login"
                                               data-link-group="idForm"
                                               data-animation-in="slideInUp">Login
                                            </a>
                                        </div>
                                    </div>
                                    <!-- End Forgot Password -->
                                </form>
                            </div>
                        </div>
                        <!-- End Content -->
                    </div>
                </div>
            </div>
        </aside> {% endcomment %}
        <!-- End Account Sidebar Navigation -->
        <!-- ========== END SECONDARY CONTENTS ========== -->

        <!-- Go to Top -->
        <a class="js-go-to u-go-to" href="#"
            data-position='{"bottom": 15, "right": 15 }'
            data-type="fixed"
            data-offset-top="400"
            data-compensation="#header"
            data-show-effect="slideInUp"
            data-hide-effect="slideOutDown">
            <span class="fas fa-arrow-up u-go-to__inner"></span>
        </a>
        <!-- End Go to Top -->


        <!-- JS Global Compulsory -->
        <script src="{% static "assets/vendor/jquery/dist/jquery.min.js" %}"></script>
        <script src="{% static "assets/vendor/jquery-migrate/dist/jquery-migrate.min.js" %}"></script>
        <script src="{% static "assets/vendor/popper.js/dist/umd/popper.min.js" %}"></script>
        <script src="{% static "assets/vendor/bootstrap/bootstrap.min.js" %}"></script>

        <!-- JS Implementing Plugins -->
        <script src="{% static "assets/vendor/appear.js" %}"></script>
        <script src="{% static "assets/vendor/jquery.countdown.min.js" %}"></script>
        <script src="{% static "assets/vendor/hs-megamenu/src/hs.megamenu.js" %}"></script>
        <script src="{% static "assets/vendor/svg-injector/dist/svg-injector.min.js" %}"></script>
        <script src="{% static "assets/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js" %}"></script>
        <script src="{% static "assets/vendor/jquery-validation/dist/jquery.validate.min.js" %}"></script>
        <script src="{% static "assets/vendor/fancybox/jquery.fancybox.min.js" %}"></script>
        <script src="{% static "assets/vendor/typed.js/lib/typed.min.js" %}"></script>
        <script src="{% static "assets/vendor/slick-carousel/slick/slick.js" %}"></script>
        <script src="{% static "assets/vendor/appear.js" %}"></script>
        <script src="{% static "assets/vendor/bootstrap-select/dist/js/bootstrap-select.min.js" %}"></script>

        <!-- JS Tokyo Store -->
        <script src="{% static "assets/js/hs.core.js" %}"></script>
        <script src="{% static "assets/js/components/hs.countdown.js" %}"></script>
        <script src="{% static "assets/js/components/hs.header.js" %}"></script>
        <script src="{% static "assets/js/components/hs.hamburgers.js" %}"></script>
        <script src="{% static "assets/js/components/hs.unfold.js" %}"></script>
        <script src="{% static "assets/js/components/hs.focus-state.js" %}"></script>
        <script src="{% static "assets/js/components/hs.malihu-scrollbar.js" %}"></script>
        <script src="{% static "assets/js/components/hs.validation.js" %}"></script>
        <script src="{% static "assets/js/components/hs.fancybox.js" %}"></script>
        <script src="{% static "assets/js/components/hs.onscroll-animation.js" %}"></script>
        <script src="{% static "assets/js/components/hs.slick-carousel.js" %}"></script>
        <script src="{% static "assets/js/components/hs.quantity-counter.js" %}"></script>
        <script src="{% static "assets/js/components/hs.show-animation.js" %}"></script>
        <script src="{% static "assets/js/components/hs.svg-injector.js" %}"></script>
        <script src="{% static "assets/js/components/hs.scroll-nav.js" %}"></script>
        <script src="{% static "assets/js/components/hs.go-to.js" %}"></script>
        <script src="{% static "assets/js/components/hs.selectpicker.js" %}"></script>

        <!-- JS Plugins Init. -->
        <script>
            $(window).on('load', function () {
                // initialization of HSMegaMenu component
                $('.js-mega-menu').HSMegaMenu({
                    event: 'hover',
                    direction: 'horizontal',
                    pageContainer: $('.container'),
                    breakpoint: 767.98,
                    hideTimeOut: 0
                });
            });

            $(document).on('ready', function () {
                // initialization of header
                $.HSCore.components.HSHeader.init($('#header'));

                // initialization of animation
                $.HSCore.components.HSOnScrollAnimation.init('[data-animation]');

                // initialization of unfold component
                $.HSCore.components.HSUnfold.init($('[data-unfold-target]'), {
                    afterOpen: function () {
                        $(this).find('input[type="search"]').focus();
                    }
                });

                // initialization of HSScrollNav component
                $.HSCore.components.HSScrollNav.init($('.js-scroll-nav'), {
                  duration: 700
                });

                // initialization of quantity counter
                $.HSCore.components.HSQantityCounter.init('.js-quantity');

                // initialization of popups
                $.HSCore.components.HSFancyBox.init('.js-fancybox');

                // initialization of countdowns
                var countdowns = $.HSCore.components.HSCountdown.init('.js-countdown', {
                    yearsElSelector: '.js-cd-years',
                    monthsElSelector: '.js-cd-months',
                    daysElSelector: '.js-cd-days',
                    hoursElSelector: '.js-cd-hours',
                    minutesElSelector: '.js-cd-minutes',
                    secondsElSelector: '.js-cd-seconds'
                });

                // initialization of malihu scrollbar
                $.HSCore.components.HSMalihuScrollBar.init($('.js-scrollbar'));

                // initialization of forms
                $.HSCore.components.HSFocusState.init();

                // initialization of form validation
                $.HSCore.components.HSValidation.init('.js-validate', {
                    rules: {
                        confirmPassword: {
                            equalTo: '#signupPassword'
                        }
                    }
                });

                // initialization of show animations
                $.HSCore.components.HSShowAnimation.init('.js-animation-link');

                // initialization of fancybox
                $.HSCore.components.HSFancyBox.init('.js-fancybox');

                // initialization of slick carousel
                $.HSCore.components.HSSlickCarousel.init('.js-slick-carousel');

                // initialization of go to
                $.HSCore.components.HSGoTo.init('.js-go-to');

                // initialization of hamburgers
                $.HSCore.components.HSHamburgers.init('#hamburgerTrigger');

                // initialization of unfold component
                $.HSCore.components.HSUnfold.init($('[data-unfold-target]'), {
                    beforeClose: function () {
                        $('#hamburgerTrigger').removeClass('is-active');
                    },
                    afterClose: function() {
                        $('#headerSidebarList .collapse.show').collapse('hide');
                    }
                });

                $('#headerSidebarList [data-toggle="collapse"]').on('click', function (e) {
                    e.preventDefault();

                    var target = $(this).data('target');

                    if($(this).attr('aria-expanded') === "true") {
                        $(target).collapse('hide');
                    } else {
                        $(target).collapse('show');
                    }
                });

                // initialization of unfold component
                $.HSCore.components.HSUnfold.init($('[data-unfold-target]'));

                // initialization of select picker
                $.HSCore.components.HSSelectPicker.init('.js-select');
            });
        </script>
        <script>
            function logImage(selectElement) {
                // Get the selected option's data-image attribute
                const selectedOption = selectElement.options[selectElement.selectedIndex];
                const imageUrl = selectedOption.getAttribute('data-image');
                
                // Log the image URL to the console
                if (imageUrl) {
                
                    const thumbnails = document.querySelectorAll('#sliderSyncingThumb .js-slide img');
                    for (const thumbnail of thumbnails) {
                        const index = thumbnail.getAttribute('data-index');
        
                        if (thumbnail.getAttribute('data-image') == imageUrl) {
                            const slickCarousel = $('.u-slick');
                            
                            if (slickCarousel.length && slickCarousel.hasClass('slick-initialized')) {
                                console.log(index, 'Navigating to this index');
                                slickCarousel.slick('slickGoTo', parseInt(index));
                            } else {
                                console.log('Slick carousel not initialized or not found');
                            }
                            break;
                        }
                    }
                } else {
                    console.log('No image for selected option');
                }
            }
            
            // Log the default selected images on page load
            document.addEventListener('DOMContentLoaded', function() {
                const selectElements = document.querySelectorAll('select.js-select');
                selectElements.forEach(function(selectElement) {
                    logImage(selectElement); // Log the default selected option's image for each dropdown
        
                    // Add event listener to handle changes
                    selectElement.addEventListener('change', function() {
                        logImage(selectElement); // Log the selected option's image whenever the selection changes
                    });
                });
            });
        </script>
    </body>
</html>
